import{u as k}from"./useHandleData-67c74622.js";import{a as L,d as x}from"./index-5fb6d2ee.js";import{e as P}from"./base-b682b852.js";import{r as g,C as R,i as _,at as I,d as T,a as m,ah as N,o as l,b as $,f as t,v as p,e as i,g as d,N as b,s as z,m as B}from"./index-9844670a.js";const S=()=>{const n=g(),u=g(null),f={requestApi:L,indent:30,columns:[{type:"selection",fixed:"left",width:80},{prop:"id",label:"id",width:100},{prop:"roleName",label:"角色",tag:!0},{prop:"userName",label:"用户名",search:{el:"input"}},{prop:"name",label:"昵称",search:{el:"input"}},{prop:"sex",label:"性别",enum:P,search:{el:"select"}},{prop:"avatar",label:"头像",width:150,render:({row:e})=>_(I,{style:{width:"40px",height:"40px"},lazy:!0,src:e==null?void 0:e.avatar,previewSrcList:[e==null?void 0:e.avatar],zIndex:99,previewTeleported:!0,fit:"cover"})},{prop:"operation",label:"操作",width:250,fixed:"right"}]},h=async e=>{var a,r;await k(x,{id:e},"删除所选信息"),(a=n.value)==null||a.clearSelection(),(r=n.value)==null||r.getTableList()},v=async e=>{var a;await k(x,{id:[e.id]},`确定删除【${e.name}】?`),(a=n.value)==null||a.getTableList()},y=()=>{var a,r;const e={title:"账号",getTableList:(a=n.value)==null?void 0:a.getTableList};(r=u.value)==null||r.acceptParams(e)};return R(()=>{var e;(e=n.value)==null||e.getTableList()}),{proTableRef:n,proTableAttrs:f,importExcelRef:u,batchAdd:y,batchDelete:h,handleDelete:v}},V={class:"table-box"},w=T({name:"system-account-list"}),F=T({...w,setup(n){const{proTableRef:u,importExcelRef:f,proTableAttrs:h,batchAdd:v,batchDelete:y,handleDelete:e}=S();return(a,r)=>{const c=m("el-button"),C=m("el-icon"),A=m("ProTable"),D=m("ImportExcel"),s=N("auth");return l(),$("div",V,[_(A,B({ref_key:"proTableRef",ref:u},b(h)),{tableHeader:t(o=>[p((l(),i(c,{type:"primary",icon:"CirclePlus",tag:"router-link",to:"/system/account/create"},{default:t(()=>[d(" 新增 ")]),_:1})),[[s,"button-create"]]),p((l(),i(c,{type:"primary",icon:"Upload",plain:"",onClick:b(v)},{default:t(()=>[d(" 批量添加 ")]),_:1},8,["onClick"])),[[s,"button-import"]]),p((l(),i(c,{type:"danger",icon:"Delete",plain:"",disabled:!o.isSelected,onClick:E=>b(y)(o.selectedListIds)},{default:t(()=>[d(" 批量删除 ")]),_:2},1032,["disabled","onClick"])),[[s,"button-delete"]])]),icon:t(o=>[_(C,{size:18},{default:t(()=>[(l(),i(z(o.row.meta.icon)))]),_:2},1024)]),operation:t(({row:o})=>[p((l(),i(c,{tag:"router-link",to:`/system/account/${o.id}`,type:"primary",icon:"View",link:""},{default:t(()=>[d(" 查看 ")]),_:2},1032,["to"])),[[s,"button-look"]]),p((l(),i(c,{to:`/system/account/update?id=${o.id}`,tag:"router-link",type:"primary",link:"",icon:"EditPen"},{default:t(()=>[d(" 编辑 ")]),_:2},1032,["to"])),[[s,"button-update"]]),p((l(),i(c,{type:"primary",link:"",icon:"Delete",onClick:E=>b(e)(o)},{default:t(()=>[d(" 删除 ")]),_:2},1032,["onClick"])),[[s,"button-delete"]])]),_:1},16),_(D,{ref_key:"importExcelRef",ref:f},null,512)])}}});export{F as default};
