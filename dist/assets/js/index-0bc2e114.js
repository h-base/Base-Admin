import{u as f}from"./useHandleData-67c74622.js";import{a as C,u as E,d as h}from"./index-5fb6d2ee.js";import{A as D}from"./AStatus-a0ce5ae5.js";import{A as L}from"./ATagStatus-cc39881b.js";import{e as R}from"./base-b682b852.js";import{r as y,C as P,i as t,aw as I,at as N,d as x,a as p,o as v,b as S,f as l,g as i,N as d,e as w,s as B,m as z}from"./index-9844670a.js";const V=()=>{const n=y(),c=y(null),u={requestApi:C,indent:30,columns:[{type:"selection",fixed:"left",width:80},{prop:"id",label:"id",width:100},{prop:"roleName",headerRender:()=>t(I,{type:"primary"},()=>"角色"),tag:!0},{prop:"userName",label:"用户名",search:{el:"input"}},{prop:"name",label:"昵称",search:{el:"input"}},{prop:"sex",label:"性别(枚举)",enum:R,search:{el:"select"}},{prop:"avatar",label:"头像",width:150,render:({row:e})=>t(N,{style:{width:"40px",height:"40px"},lazy:!0,src:e==null?void 0:e.avatar,previewSrcList:[e==null?void 0:e.avatar],zIndex:99,previewTeleported:!0,fit:"cover"})},{prop:"status",label:"状态（tsx）",width:200,render:({row:e})=>t(D,{value:e.status,change:a=>e.status=a,http:{api:E,params:{id:e.id}}})},{prop:"statusTag",label:"登录状态(tsx)",width:200,render:({row:e})=>t(L,{value:e.statusTag})},{prop:"operation",label:"操作",width:250,fixed:"right"}]},m=async e=>{var a,r;await f(h,{id:e},"删除所选信息"),(a=n.value)==null||a.clearSelection(),(r=n.value)==null||r.getTableList()},b=async e=>{var a;await f(h,{id:[e.id]},`确定删除【${e.name}】?`),(a=n.value)==null||a.getTableList()},_=()=>{var a,r;const e={title:"账号",getTableList:(a=n.value)==null?void 0:a.getTableList};(r=c.value)==null||r.acceptParams(e)};return P(()=>{var e;(e=n.value)==null||e.getTableList()}),{proTableRef:n,proTableAttrs:u,importExcelRef:c,batchAdd:_,batchDelete:m,handleDelete:b}},$={class:"table-box"},H=x({name:"table-base"}),K=x({...H,setup(n){const{proTableRef:c,importExcelRef:u,proTableAttrs:m,batchAdd:b,batchDelete:_,handleDelete:e}=V();return(a,r)=>{const o=p("el-button"),T=p("el-icon"),g=p("ProTable"),A=p("ImportExcel");return v(),S("div",$,[t(g,z({ref_key:"proTableRef",ref:c},d(m)),{tableHeader:l(s=>[t(o,{type:"primary",icon:"CirclePlus"},{default:l(()=>[i(" 新增 ")]),_:1}),t(o,{type:"primary",icon:"Upload",plain:"",onClick:d(b)},{default:l(()=>[i(" 批量添加 ")]),_:1},8,["onClick"]),t(o,{type:"danger",icon:"Delete",plain:"",disabled:!s.isSelected,onClick:k=>d(_)(s.selectedListIds)},{default:l(()=>[i(" 批量删除 ")]),_:2},1032,["disabled","onClick"])]),icon:l(s=>[t(T,{size:18},{default:l(()=>[(v(),w(B(s.row.meta.icon)))]),_:2},1024)]),operation:l(({row:s})=>[t(o,{type:"primary",icon:"View",link:""},{default:l(()=>[i(" 查看 ")]),_:1}),t(o,{type:"primary",link:"",icon:"EditPen"},{default:l(()=>[i(" 编辑 ")]),_:1}),t(o,{type:"primary",link:"",icon:"Delete",onClick:k=>d(e)(s)},{default:l(()=>[i(" 删除 ")]),_:2},1032,["onClick"])]),_:1},16),t(A,{ref_key:"importExcelRef",ref:u},null,512)])}}});export{K as default};
