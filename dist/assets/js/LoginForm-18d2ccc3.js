import{a0 as V,al as x,r as F,a3 as y,B as R,am as A,an as C,ae as L,U as S,ao as U,d as B,a as r,o as E,b as T,i as t,f as s,N as n,n as h,g as N,F as z}from"./index-9844670a.js";import{u as M,a as q}from"./index-29d3d16d.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const K=()=>{const v=V(),d=x(),a=M(),p=q(),i=F(),_=y({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=F(!1),f=y({userName:"",password:""}),o=()=>{var e;(e=i.value)==null||e.validate(async m=>{if(m){l.value=!0;try{const{data:c}=await A({...f});d.setToken(c.access_token),d.getUserInfo(),await C(),a.closeMultipleTab(),p.setKeepAliveName(),v.push(L),S({title:U(),message:"欢迎登录 Base Admin",type:"success",duration:3e3})}finally{l.value=!1}}})},g=()=>{var e;(e=i.value)==null||e.resetFields()};return R(()=>{document.onkeydown=e=>{if(e=window.event||e,e.code==="Enter"||e.code==="enter"||e.code==="NumpadEnter"){if(l.value)return;o()}}}),{loginFormRef:i,loginForm:f,loginRules:_,loading:l,resetForm:g,handleLogin:o}},$={class:"login-btn"},D=B({__name:"LoginForm",setup(v){const{loginFormRef:d,loginForm:a,loginRules:p,loading:i,resetForm:_,handleLogin:l}=K();return(f,o)=>{const g=r("user"),e=r("el-icon"),m=r("el-input"),c=r("el-form-item"),k=r("lock"),b=r("el-form"),w=r("el-button");return E(),T(z,null,[t(b,{ref_key:"loginFormRef",ref:d,model:n(a),rules:n(p),size:"large"},{default:s(()=>[t(c,{prop:"userName"},{default:s(()=>[t(m,{modelValue:n(a).userName,"onUpdate:modelValue":o[0]||(o[0]=u=>n(a).userName=u),placeholder:"用户名：admin / user"},{prefix:s(()=>[t(e,{class:"el-input__icon"},{default:s(()=>[t(g)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(c,{prop:"password"},{default:s(()=>[t(m,{modelValue:n(a).password,"onUpdate:modelValue":o[1]||(o[1]=u=>n(a).password=u),type:"password",placeholder:"密码：123456","show-password":"",autocomplete:"new-password"},{prefix:s(()=>[t(e,{class:"el-input__icon"},{default:s(()=>[t(k)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),h("div",$,[t(w,{icon:"CircleClose",round:"",size:"large",onClick:o[2]||(o[2]=u=>n(_)())},{default:s(()=>[N("重置")]),_:1}),t(w,{icon:"UserFilled",round:"",size:"large",type:"primary",loading:n(i),onClick:o[3]||(o[3]=u=>n(l)())},{default:s(()=>[N(" 登录 ")]),_:1},8,["loading"])])],64)}}});const G=I(D,[["__scopeId","data-v-ce791d09"]]);export{G as default};
