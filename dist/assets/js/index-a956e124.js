import{u as A}from"./useHandleData-67c74622.js";import{a as S,u as D,d as F}from"./index-5fb6d2ee.js";import{A as P}from"./AStatus-a0ce5ae5.js";import{A as R}from"./ATagStatus-cc39881b.js";import{e as E}from"./base-b682b852.js";import{r as _,a3 as h,i as t,aw as N,at as B,d as y,a as u,o as g,b as V,n as I,N as s,f as a,g as p,e as L,s as $,m as w}from"./index-9844670a.js";const z=()=>{const o=_(),n=h({requestApi:S,requestAuto:!1,indent:30,initParam:void 0,columns:[{type:"selection",fixed:"left",width:80},{prop:"id",label:"id",width:100},{prop:"roleName",headerRender:()=>t(N,{type:"primary"},()=>"角色"),tag:!0},{prop:"userName",label:"用户名",search:{el:"input"}},{prop:"name",label:"昵称",search:{el:"input"}},{prop:"sex",label:"性别(枚举)",enum:E,search:{el:"select"}},{prop:"avatar",label:"头像",width:150,render:({row:e})=>t(B,{style:{width:"40px",height:"40px"},lazy:!0,src:e==null?void 0:e.avatar,previewSrcList:[e==null?void 0:e.avatar],zIndex:99,previewTeleported:!0,fit:"cover"})},{prop:"status",label:"状态（tsx）",width:200,render:({row:e})=>t(P,{value:e.status,change:l=>e.status=l,http:{api:D,params:{id:e.id}}})},{prop:"statusTag",label:"登录状态(tsx)",width:200,render:({row:e})=>t(R,{value:e.statusTag})},{prop:"operation",label:"操作",width:250,fixed:"right"}]}),m=h([{title:"用户状态(单)",key:"userStatus",options:[{label:"全部",value:""},{label:"状态1",value:"1",icon:"User"},{label:"状态2",value:"2",icon:"Bell"},{label:"状态3",value:"3",icon:"Clock"},{label:"状态4",value:"4",icon:"CircleClose"},{label:"状态5",value:"5",icon:"CircleCheck"}]},{title:"用户角色(多)",key:"userRole",multiple:!0,options:[{label:"全部",value:""},{label:"角色1",value:"1"},{label:"角色2",value:"2"},{label:"角色3",value:"3"},{label:"角色4",value:"4"}]}]),r=_({userStatus:"1",userRole:["1","2"]});return{proTableRef:o,proTableAttrs:n,selectFilterData:m,selectFilterValues:r,changeSelectFilter:e=>{o.value.pageable.pageNum=1,r.value=e,n.initParam=Object.assign({},n.initParam,{userStatus:r.value.userStatus,role:r.value.userRole.join(",")})},getTableData:e=>{var l;e?n.initParam={sex:"1"}:(l=o.value)==null||l.getTableList()},handleDelete:async e=>{var l;await A(F,{id:[e.id]},`确定删除【${e.name}】?`),(l=o.value)==null||l.getTableList()}}},j={class:"table-box"},q={class:"card mb10 pt0 pb0"},H=y({name:"table-manual"}),W=y({...H,setup(o){const{proTableRef:n,proTableAttrs:m,selectFilterData:r,selectFilterValues:v,changeSelectFilter:f,getTableData:b,handleDelete:e}=z();return(l,d)=>{const x=u("SelectFilter"),i=u("el-button"),T=u("el-icon"),k=u("ProTable"),C=u("ImportExcel");return g(),V("div",j,[I("div",q,[t(x,{data:s(r),"default-values":s(v),onChange:s(f)},null,8,["data","default-values","onChange"])]),t(k,w({ref_key:"proTableRef",ref:n},s(m)),{tableHeader:a(()=>[t(i,{type:"primary",icon:"Search",onClick:d[0]||(d[0]=c=>s(b)(!1))},{default:a(()=>[p(" 获取数据 ")]),_:1}),t(i,{type:"success",icon:"Search",onClick:d[1]||(d[1]=c=>s(b)(!0))},{default:a(()=>[p(" 获取数据(修改默认参数) ")]),_:1})]),icon:a(c=>[t(T,{size:18},{default:a(()=>[(g(),L($(c.row.meta.icon)))]),_:2},1024)]),operation:a(({row:c})=>[t(i,{type:"primary",icon:"View",link:""},{default:a(()=>[p(" 查看 ")]),_:1}),t(i,{type:"primary",link:"",icon:"EditPen"},{default:a(()=>[p(" 编辑 ")]),_:1}),t(i,{type:"primary",link:"",icon:"Delete",onClick:O=>s(e)(c)},{default:a(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:1},16),t(C,{ref:"importExcelRef"},null,512)])}}});export{W as default};
